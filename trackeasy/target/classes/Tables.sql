/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 15.2 		*/
/*  Created On : 13-juin-2025 12:37:09 				*/
/*  DBMS       : SQLite 								*/
/* ---------------------------------------------------- */

/* Drop Tables */

DROP TABLE IF EXISTS Conductor;
DROP TABLE IF EXISTS Fleetmanager;
DROP TABLE IF EXISTS Person;
DROP TABLE IF EXISTS Technician;
DROP TABLE IF EXISTS Tracker;
DROP TABLE IF EXISTS Vehicle;

/* Create Tables with Primary and Foreign Keys, Check and Unique Constraints */

CREATE TABLE 'Person' (
    Firstname varchar NULL,
    Id varchar NULL,
    Lastname varchar NULL,
    PersonID varchar NOT NULL PRIMARY KEY
);

CREATE TABLE Fleetmanager (
	FleetmanagerID varchar PRIMARY KEY NOT NULL,
	CONSTRAINT FK_FleetManager_Person FOREIGN KEY (FleetmanagerID) REFERENCES Person (PersonID)
);

CREATE TABLE Technician (
	TechnicianID varchar PRIMARY KEY NOT NULL,
	CONSTRAINT FK_Technician_Person FOREIGN KEY (TechnicianID) REFERENCES Person (PersonID)
);

CREATE TABLE Conductor (
	ConductorID varchar PRIMARY KEY NOT NULL,
	CONSTRAINT FK_Conductor_Person FOREIGN KEY (ConductorID) REFERENCES Person (PersonID)
);

CREATE TABLE Tracker (
	TrackerID varchar PRIMARY KEY NOT NULL,
	Type varchar,
	Id varchar,
	TechnicianID varchar,
	CONSTRAINT FK_Tracker_Create FOREIGN KEY (TechnicianID) REFERENCES Technician (TechnicianID)
);

CREATE TABLE Vehicle (
	VehicleID varchar PRIMARY KEY NOT NULL,
	Brand varchar,
	Color varchar,
	Id varchar,
	Location varchar,
	ConductorID varchar,
	TrackerID varchar,
	CONSTRAINT FK_Vehicle_Drive FOREIGN KEY (ConductorID) REFERENCES Conductor (ConductorID),
	CONSTRAINT FK_Vehicle_Tracker FOREIGN KEY (TrackerID) REFERENCES Tracker (TrackerID)
);